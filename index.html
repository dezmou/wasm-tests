<html>

<body>
  <script>

    (async () => {
      const loadAsm = async (scriptSrc) => {
        const script = await (await fetch(scriptSrc)).arrayBuffer()
        const module = await WebAssembly.compile(script)
        const instance = new WebAssembly.Instance(module, {
          env: {
            memoryBase: 0,
            tableBase: 0,
            memory: new WebAssembly.Memory({ initial: 256, maximum: 1024 }),
            table: new WebAssembly.Table({ initial: 0, element: 'anyfunc' })
          },
        })
        console.log(instance);
        return instance.exports
      }

      const funcs = await loadAsm("main.wasm")
      console.log(funcs);
      const res = funcs.doubler(60)
      console.log(res);

    })()

  </script>
</body>

</html>